@using AsloobBedaa.Models.Letter
@model LetterTemplateVM

<h3>Create Letter</h3>

<form method="post">
    <div class="mb-2">
        <label>Letter Type</label>
        <select asp-for="LetterTypeId" class="form-control">
            @foreach (var lt in ViewBag.LetterTypes)
            {
                <option value="@lt.Id">@lt.Name</option>
            }
        </select>
    </div>

    <div class="mb-2">
        <label>Title</label>
        <input asp-for="Title" class="form-control" />
    </div>

    <hr />
    <h5>Add Sections</h5>

    <table class="table" id="sectionTable">
        <thead>
            <tr>
                <th>Serial</th>
                <th>Header</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <button type="button" class="btn btn-secondary" onclick="addRow()">Add Section</button>
    <br /><br />

    <button type="submit" class="btn btn-primary">Save & Preview</button>
</form>

<script>
    let index = 0;
    function addRow() {
        let row = `
        <tr>
            <td><input name="Sections[${index}].SerialNo" class="form-control"/></td>
            <td><input name="Sections[${index}].Header" class="form-control"/></td>
            <td><textarea name="Sections[${index}].Description" class="form-control"></textarea></td>
        </tr>`;
        document.querySelector("#sectionTable tbody").insertAdjacentHTML("beforeend", row);
        index++;
    }
</script>
